{% extends '../base/base.html' %}{% load static %}{% block projects %}
<div class="projects-wrapper" id="progs">
  <div class="title-projects-wrapper">
    <div class="section-content-title-x-x">
      <h1>Programmes</h1>
    </div>
    <div class="section-content-title-line"></div>
    <div class="section-content-title-x-x">
      <p>
        Make a difference with us! Volunteer,
        <br />donate funds, or give in kind every contribution helps create a
        lasting impact.
      </p>
    </div>
    <div class="events-slider">
      <div class="center-bolt">
        <div class="service-cards">
          <div class="slider-reel">
            {% for prog in progs %}
            <div class="card-x">
              <div class="card-x-inner-menu">
                <img src="{{prog.image.url}}" alt="{{ prog.title }}" />
                <div class="bottom-left-x-cats">
                  <div class="title-left-x-cats">
                    <h1>{{prog.title}}</h1>
                  </div>
                </div>
              </div>
              <div class="global-button-white">
                <a
                  href="#"
                  class="open-progs-modal"
                  data-title="{{ prog.title }}"
                  data-description="{{ prog.description }}"
                  >Learn more</a
                >
              </div>
            </div>
            {% endfor %}
          </div>

          <div id="progsModal" class="progs-modal">
            <div class="progs-modal-content">
              <span class="close-progs-modal">&times;</span>
              <h2 id="progsModalTitle"></h2>
              <p id="progsModalDescription"></p>
            </div>
          </div>

          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const modal = document.getElementById("progsModal");
              const modalTitle = document.getElementById("progsModalTitle");
              const modalDescription = document.getElementById(
                "progsModalDescription"
              );
              const closeModal = document.querySelector(".close-progs-modal");

              document
                .querySelectorAll(".open-progs-modal")
                .forEach((button) => {
                  button.addEventListener("click", function (event) {
                    event.preventDefault();
                    modalTitle.textContent = this.getAttribute("data-title");
                    modalDescription.textContent =
                      this.getAttribute("data-description");
                    modal.style.display = "flex";
                  });
                });

              closeModal.addEventListener("click", function () {
                modal.style.display = "none";
              });

              window.addEventListener("click", function (event) {
                if (event.target === modal) {
                  modal.style.display = "none";
                }
              });
            });
          </script>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const scrollContainer = document.querySelector(".infinite-scroll");
  const cards = Array.from(scrollContainer.children);

  // Clone each card and append it to the container
  cards.forEach((card) => {
    const clone = card.cloneNode(true);
    scrollContainer.appendChild(clone);
  });
</script>

{% endblock %}
